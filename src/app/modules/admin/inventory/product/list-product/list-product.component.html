<div class="sm:inset-0 flex flex-col flex-auto min-w-0 sm:overflow-hidden bg-card dark:bg-transparent">
<div class="relative py-8 px-6 md:px-8 border-b">
  <div class="">
    <div class="text-4xl font-extrabold tracking-tight">
      Products
    </div>
    <div class="mt-2">
      <button [routerLink]="['add']" mat-flat-button [color]="'primary'">
        <mat-icon [svgIcon]="'heroicons_solid:plus'"></mat-icon>
        <span class="ml-2 mr-1">Add Product</span>
      </button>
    </div>
  </div>
</div>
<div class="flex flex-column overflow-auto">
  <div class="flex  w-full relative">
    <table class="w-full bg-transparent" mat-table matSort [dataSource]="dataSource">

      <ng-container matColumnDef="id">
        <th mat-header-cell mat-sort-header *matHeaderCellDef>
          ID
        </th>
        <td mat-cell *matCellDef="let element">
            {{element.id}}
        </td>
      </ng-container>

      <ng-container matColumnDef="image">
        <th mat-header-cell mat-sort-header *matHeaderCellDef>
          Image
        </th>
        <td mat-cell *matCellDef="let element">
          <div class="product-thumbnail-sm m-2 rounded p-2 border flex items-center justify-center overflow-hidden">
            <img class="w-full h-full" [src]="element.images[0]?.publicUrl" onError="this.src='assets/images/no-image.jpg'" />
          </div>
        </td>
      </ng-container>

      <ng-container matColumnDef="name">
        <th mat-header-cell mat-sort-header *matHeaderCellDef>
          Name
        </th>
        <td mat-cell *matCellDef="let element">
          {{element.name}}
        </td>
      </ng-container>

      <ng-container matColumnDef="cat">
        <th mat-header-cell mat-sort-header *matHeaderCellDef>
          Category
        </th>
        <td mat-cell *matCellDef="let element">
          <a class="text-primary-500" [routerLink]="['/admin/productcategories', element.category.id]" *ngIf="element.category">{{element.category?.name}}</a>
          <span *ngIf="!element.category">N/A</span>
        </td>
      </ng-container>

      <ng-container matColumnDef="size">
        <th mat-header-cell mat-sort-header *matHeaderCellDef>
          In stock
        </th>
        <td mat-cell *matCellDef="let element">
          {{element.inStock}}
        </td>
      </ng-container>

      <ng-container matColumnDef="status">
        <th mat-header-cell mat-sort-header *matHeaderCellDef>
          Status
        </th>
        <td mat-cell *matCellDef="let element">
          <span class="rounded text-on-primary bg-primary px-2 py-1" *ngIf="element.approvedAt" >Live</span >
          <span class="rounded text-on-warn bg-warn px-2 py-1" *ngIf="!element.approvedAt" >Hidden</span>
        </td>
      </ng-container>

      <ng-container matColumnDef="action">
        <th mat-header-cell mat-sort-header *matHeaderCellDef>
          Actions
        </th>
        <td mat-cell *matCellDef="let element">
          <button [routerLink]="['edit', element.id]" mat-flat-button [color]="'primary'">
            Edit
          </button>
        </td>
      </ng-container>


      <tr class="bg-white shadow" mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
      <tr class="order-row h-16" mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
    <mat-spinner *ngIf="isLoadingObs | async" class="absolute h-full w-full"></mat-spinner>
    <fuse-alert class="m-4" *ngIf="errorMsg" [appearance]="'outline'" [type]="'warning'">
      {{errorMsg}}
    </fuse-alert>
  </div>
  <mat-paginator (page)="paginate($event)" [length]="totalAccounts" [pageSize]="10" [pageSizeOptions]="[5, 10, 25, 100]" aria-label="Select page">
  </mat-paginator>
</div>
</div>