<div class="flex flex-col flex-auto min-w-0">
    <div class="bg-card">
        <div class="flex flex-col w-full max-w-screen-xl mx-auto px-6 sm:px-8" *ngIf="application as item">
            <div class="flex flex-col sm:flex-row flex-auto sm:items-center min-w-0 my-4 sm:my-6">
                <div class="flex flex-auto items-center min-w-0 py-5">
                    <div class="flex flex-col min-w-0 ml-4">
                        <div class="flex items-center">
                            <div
                                class="text-2xl md:text-5xl font-semibold tracking-tight leading-7 md:leading-snug truncate ng-star-inserted">
                                {{ item.userDetail.firstName }} {{ item.userDetail.surname }}
                                <span class="text-red-500">
                                    {{ item?.charge?.totalLoanAmount / 100 | currency :
                                    item?.charge?.currency.toUpperCase() }}
                                </span>
                            </div>
                        </div>
                        <div class="flex items-center">
                            <div class="flex items-center justify-between flex-col sm:flex-row">
                                <div class="text-lg font-bold tracking-tight">Application ID:{{ item.id }}</div>
                                <div class="ms-2">Created {{ item.createdAt | date : "MMM dd, yy, hh:mm a" }}</div>
                                <div class="ms-2">Updated {{ item.updatedAt | date : "MMM dd, yy, hh:mm a" }}</div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="flex items-center mt-6 sm:mt-0 sm:ml-2 space-x-3" role="button" (click)="backToApplications()">
                    <mat-icon svgIcon="close"></mat-icon>
                </div>
            </div>

            <!-- Final review card -->
            <div *ngIf="applicants?.data?.length>0"
                class="sm:col-span-2 md:col-span-4 flex flex-col flex-auto p-6 bg-gray-100 shadow rounded-2xl overflow-hidden align-middle">
                <app-user-detail [applicationId]="applicationId"></app-user-detail>
            </div>
        </div>
        <div class="flex flex-col w-full max-w-screen-xl mx-auto my-3 mat_tabs">
            <mat-tab-group mat-align-tabs="start" class="flex w-full p-2 max-w-screen-xl">
                <mat-tab label="Decision Engine">
                    <app-decision-overview *ngIf="applicationId" [dataId]="applicationId"></app-decision-overview>
                </mat-tab>
                <span *ngIf="applicants?.data?.length>0">
                    <mat-tab *ngFor="let item of applicants.data" class="tab-title">
                        <ng-template mat-tab-label>Credit Details: {{ item.userDetail.firstName }}</ng-template>
                        <app-credit-details [creditData]="item"></app-credit-details>
                    </mat-tab>
                </span>
                <mat-tab label="History">
                    <app-finance-application-history *ngIf="applicationId"
                        [applicationId]="applicationId"></app-finance-application-history>
                </mat-tab>
                <mat-tab label="Notes">
                    <app-finance-application-notes *ngIf="applicationId"
                        [applicationId]="applicationId"></app-finance-application-notes>
                </mat-tab>
                <mat-tab label="Consent">
                    <app-consent-application *ngIf="applicationId"
                        [applicationId]="applicationId"></app-consent-application>
                </mat-tab>
            </mat-tab-group>
        </div>
    </div>
</div>